<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />

  <title>HFT IPR Signed URL Requests</title>

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>
<script defer src="main.js"></script></head>

<body>
  <div class="reveal">
    <div class="slides">
      <section data-background-image="https://media.giphy.com/media/3ohjUSqjO5T3vgnIvC/giphy.gif">
        <h1 class="title">IPR</h1>
        <h3 class="title">Signed Url Requests</h3>
      </section>

      <!-- File Upload -->
      <section>
        <section data-auto-animate data-background-size="cover"
          data-background-image="https://media.giphy.com/media/VJY3zeoK87CLBKnqqm/giphy.gif">
          <h3 class="title">File Upload 2022</h3>
        </section>
        <section data-auto-animate>
          <h3>File Upload 2022</h3>
          <ul>
            <li>Datenspeicher muss automatisch wachsen</li>
            <li>Globale Bereitstellung von Assets</li>
            <li>Container sind kurzlebig -> Keinerlei Persistenz</li>
            <li>Rechte Management</li>
            <li>Backups</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h3>Einfache Lösung</h3>
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="471px"
            height="241px" viewBox="-0.5 -0.5 471 241">
            <g>
              <path d="M 160 40 L 303.63 40" fill="none" stroke="#000000" stroke-miterlimit="10"
                pointer-events="stroke"></path>
              <path d="M 308.88 40 L 301.88 43.5 L 303.63 40 L 301.88 36.5 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 41px; margin-left: 231px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; background-color: #ffffff; white-space: nowrap; ">
                          Upload File</div>
                      </div>
                    </div>
                  </foreignObject><text x="231" y="44" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Upload File</text>
                </switch>
              </g>
              <rect x="0" y="0" width="160" height="80" fill="#d5e8d4" stroke="#82b366" pointer-events="all"></rect>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 40px; margin-left: 1px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">
                          Frontend / Browser</div>
                      </div>
                    </div>
                  </foreignObject><text x="80" y="44" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Frontend / Browser</text>
                </switch>
              </g>
              <path d="M 390 80 L 390 153.63" fill="none" stroke="#000000" stroke-miterlimit="10"
                pointer-events="stroke"></path>
              <path d="M 390 158.88 L 386.5 151.88 L 390 153.63 L 393.5 151.88 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <rect x="310" y="0" width="160" height="80" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"></rect>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 40px; margin-left: 311px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">
                          <p style="font-size: 12px"><span style="font-size: 12px">
                              <font style="font-size: 12px">Backend / Server</font>
                            </span></p>
                        </div>
                      </div>
                    </div>
                  </foreignObject><text x="390" y="44" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Backend / Server</text>
                </switch>
              </g>
              <path d="M 310 200 L 80 200 L 80 86.37" fill="none" stroke="#000000" stroke-miterlimit="10"
                pointer-events="stroke"></path>
              <path d="M 80 81.12 L 83.5 88.12 L 80 86.37 L 76.5 88.12 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 201px; margin-left: 178px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; background-color: #ffffff; white-space: nowrap; ">
                          Read File</div>
                      </div>
                    </div>
                  </foreignObject><text x="178" y="204" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Read File</text>
                </switch>
              </g>
              <rect x="310" y="160" width="160" height="80" fill="#fff2cc" stroke="#d6b656" pointer-events="all"></rect>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 200px; margin-left: 311px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">
                          <p style="font-size: 12px"><span style="font-size: 12px">
                              <font style="font-size: 12px">AWS S3 / GCloud / Azure</font>
                            </span></p>
                        </div>
                      </div>
                    </div>
                  </foreignObject><text x="390" y="204" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">AWS S3 / GCloud / Azure</text>
                </switch>
              </g>
            </g>
            <switch>
              <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"></g><a transform="translate(0,-5)"
                xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text
                  text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a>
            </switch>
          </svg>
        </section>
        <section data-auto-animate>
          <h3>Signed URL</h3>
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="471px"
            height="148px" viewBox="-0.5 -0.5 471 148" style="background-color: rgb(255, 255, 255);">
            <g>
              <path d="M 160 107 L 303.63 107" fill="none" stroke="#000000" stroke-miterlimit="10"
                pointer-events="stroke"></path>
              <path d="M 308.88 107 L 301.88 110.5 L 303.63 107 L 301.88 103.5 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 108px; margin-left: 231px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; background-color: #ffffff; white-space: nowrap; ">
                          Give me an URL</div>
                      </div>
                    </div>
                  </foreignObject><text x="231" y="111" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Give me an URL</text>
                </switch>
              </g>
              <rect x="0" y="67" width="160" height="80" fill="#d5e8d4" stroke="#82b366" pointer-events="all"></rect>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 107px; margin-left: 1px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">
                          Frontend / Browser</div>
                      </div>
                    </div>
                  </foreignObject><text x="80" y="111" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Frontend / Browser</text>
                </switch>
              </g>
              <path d="M 390 67 L 390 7 L 80 7 L 80 60.63" fill="none" stroke="#000000" stroke-miterlimit="10"
                pointer-events="stroke"></path>
              <path d="M 80 65.88 L 76.5 58.88 L 80 60.63 L 83.5 58.88 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 8px; margin-left: 226px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; background-color: #ffffff; white-space: nowrap; ">
                          Signed Url</div>
                      </div>
                    </div>
                  </foreignObject><text x="226" y="11" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Signed Url</text>
                </switch>
              </g>
              <rect x="310" y="67" width="160" height="80" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"></rect>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 107px; margin-left: 311px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">
                          <p style="font-size: 12px"><span style="font-size: 12px">
                              <font style="font-size: 12px">Backend / Server</font>
                            </span></p>
                        </div>
                      </div>
                    </div>
                  </foreignObject><text x="390" y="111" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Backend / Server</text>
                </switch>
              </g>
            </g>
            <switch>
              <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"></g><a transform="translate(0,-5)"
                xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text
                  text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a>
            </switch>
          </svg>
        </section>
        <section data-auto-animate>
          <h3>Signed URL</h3>
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="471px"
            height="308px" viewBox="-0.5 -0.5 471 308" style="background-color: rgb(255, 255, 255);">
            <g>
              <path d="M 160 107 L 303.63 107" fill="none" stroke="#000000" stroke-miterlimit="10"
                pointer-events="stroke"></path>
              <path d="M 308.88 107 L 301.88 110.5 L 303.63 107 L 301.88 103.5 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 108px; margin-left: 231px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; background-color: #ffffff; white-space: nowrap; ">
                          Give me an URL</div>
                      </div>
                    </div>
                  </foreignObject><text x="231" y="111" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Give me an URL</text>
                </switch>
              </g>
              <rect x="0" y="67" width="160" height="80" fill="#d5e8d4" stroke="#82b366" pointer-events="all"></rect>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 107px; margin-left: 1px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">
                          Frontend / Browser</div>
                      </div>
                    </div>
                  </foreignObject><text x="80" y="111" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Frontend / Browser</text>
                </switch>
              </g>
              <path d="M 390 153.37 L 390 267 L 166.37 267" fill="none" stroke="#000000" stroke-miterlimit="10"
                pointer-events="stroke"></path>
              <path d="M 390 148.12 L 393.5 155.12 L 390 153.37 L 386.5 155.12 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <path d="M 161.12 267 L 168.12 263.5 L 166.37 267 L 168.12 270.5 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 258px; margin-left: 301px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; background-color: #ffffff; white-space: nowrap; ">
                          Auth &amp; Generate Signed Url</div>
                      </div>
                    </div>
                  </foreignObject><text x="301" y="261" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Auth &amp; Generate Signed Url</text>
                </switch>
              </g>
              <path d="M 390 67 L 390 7 L 80 7 L 80 60.63" fill="none" stroke="#000000" stroke-miterlimit="10"
                pointer-events="stroke"></path>
              <path d="M 80 65.88 L 76.5 58.88 L 80 60.63 L 83.5 58.88 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 8px; margin-left: 226px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; background-color: #ffffff; white-space: nowrap; ">
                          Signed Url</div>
                      </div>
                    </div>
                  </foreignObject><text x="226" y="11" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Signed Url</text>
                </switch>
              </g>
              <rect x="310" y="67" width="160" height="80" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"></rect>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 107px; margin-left: 311px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">
                          <p style="font-size: 12px"><span style="font-size: 12px">
                              <font style="font-size: 12px">Backend / Server</font>
                            </span></p>
                        </div>
                      </div>
                    </div>
                  </foreignObject><text x="390" y="111" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Backend / Server</text>
                </switch>
              </g>
              <rect x="0" y="227" width="160" height="80" fill="#fff2cc" stroke="#d6b656" pointer-events="all"></rect>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 267px; margin-left: 1px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">
                          <p style="font-size: 12px"><span style="font-size: 12px">
                              <font style="font-size: 12px">AWS S3 / GCloud / Azure</font>
                            </span></p>
                        </div>
                      </div>
                    </div>
                  </foreignObject><text x="80" y="271" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">AWS S3 / GCloud / Azure</text>
                </switch>
              </g>
            </g>
            <switch>
              <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"></g><a transform="translate(0,-5)"
                xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text
                  text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a>
            </switch>
          </svg>
        </section>
        <section data-auto-animate>
          <h3>Signed URL</h3>
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="533px"
            height="308px" viewBox="-0.5 -0.5 533 308" style="background-color: rgb(255, 255, 255);">
            <g>
              <path d="M 222 107 L 365.63 107" fill="none" stroke="#000000" stroke-miterlimit="10"
                pointer-events="stroke"></path>
              <path d="M 370.88 107 L 363.88 110.5 L 365.63 107 L 363.88 103.5 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 108px; margin-left: 293px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; background-color: #ffffff; white-space: nowrap; ">
                          Give me an URL</div>
                      </div>
                    </div>
                  </foreignObject><text x="293" y="111" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Give me an URL</text>
                </switch>
              </g>
              <path d="M 142 153.37 L 142 227" fill="none" stroke="#000000" stroke-miterlimit="10"
                pointer-events="stroke"></path>
              <path d="M 142 148.12 L 145.5 155.12 L 142 153.37 L 138.5 155.12 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 190px; margin-left: 143px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; background-color: #ffffff; white-space: nowrap; ">
                          Read file</div>
                      </div>
                    </div>
                  </foreignObject><text x="143" y="193" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Read file</text>
                </switch>
              </g>
              <rect x="62" y="67" width="160" height="80" fill="#d5e8d4" stroke="#82b366" pointer-events="all"></rect>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 107px; margin-left: 63px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">
                          Frontend / Browser</div>
                      </div>
                    </div>
                  </foreignObject><text x="142" y="111" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Frontend / Browser</text>
                </switch>
              </g>
              <path d="M 452 153.37 L 452 267 L 228.37 267" fill="none" stroke="#000000" stroke-miterlimit="10"
                pointer-events="stroke"></path>
              <path d="M 452 148.12 L 455.5 155.12 L 452 153.37 L 448.5 155.12 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <path d="M 223.12 267 L 230.12 263.5 L 228.37 267 L 230.12 270.5 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 258px; margin-left: 363px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; background-color: #ffffff; white-space: nowrap; ">
                          Auth &amp; Generate Signed Url</div>
                      </div>
                    </div>
                  </foreignObject><text x="363" y="261" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Auth &amp; Generate Signed Url</text>
                </switch>
              </g>
              <path d="M 452 67 L 452 7 L 142 7 L 142 60.63" fill="none" stroke="#000000" stroke-miterlimit="10"
                pointer-events="stroke"></path>
              <path d="M 142 65.88 L 138.5 58.88 L 142 60.63 L 145.5 58.88 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 8px; margin-left: 288px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; background-color: #ffffff; white-space: nowrap; ">
                          Signed Url</div>
                      </div>
                    </div>
                  </foreignObject><text x="288" y="11" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Signed Url</text>
                </switch>
              </g>
              <rect x="372" y="67" width="160" height="80" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"></rect>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 107px; margin-left: 373px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">
                          <p style="font-size: 12px"><span style="font-size: 12px">
                              <font style="font-size: 12px">Backend / Server</font>
                            </span></p>
                        </div>
                      </div>
                    </div>
                  </foreignObject><text x="452" y="111" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Backend / Server</text>
                </switch>
              </g>
              <path d="M 55.63 267 L 42 267 L 42 107 L 62 107" fill="none" stroke="#000000" stroke-miterlimit="10"
                pointer-events="stroke"></path>
              <path d="M 60.88 267 L 53.88 270.5 L 55.63 267 L 53.88 263.5 Z" fill="#000000" stroke="#000000"
                stroke-miterlimit="10" pointer-events="all"></path>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 188px; margin-left: 33px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; background-color: #ffffff; white-space: nowrap; ">
                          Upload File</div>
                      </div>
                    </div>
                  </foreignObject><text x="33" y="191" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">Upload File</text>
                </switch>
              </g>
              <rect x="62" y="227" width="160" height="80" fill="#fff2cc" stroke="#d6b656" pointer-events="all"></rect>
              <g transform="translate(-0.5 -0.5)">
                <switch>
                  <foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%"
                    height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                    <div xmlns="http://www.w3.org/1999/xhtml"
                      style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 267px; margin-left: 63px;">
                      <div style="box-sizing: border-box; font-size: 0; text-align: center; ">
                        <div
                          style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">
                          <p style="font-size: 12px"><span style="font-size: 12px">
                              <font style="font-size: 12px">AWS S3 / GCloud / Azure</font>
                            </span></p>
                        </div>
                      </div>
                    </div>
                  </foreignObject><text x="142" y="271" fill="#000000" font-family="Helvetica" font-size="12px"
                    text-anchor="middle" font-weight="bold">AWS S3 / GCloud / Azure</text>
                </switch>
              </g>
            </g>
            <switch>
              <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"></g><a transform="translate(0,-5)"
                xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text
                  text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a>
            </switch>
          </svg>
        </section>

      </section>

      <!-- AWS -->
      <section>
        <section data-auto-animate data-background-size="cover"
          data-background-image="https://media.giphy.com/media/cPSeb8U6cjALDo0GGL/giphy.gif">
          <h3 class="title">Amazon web services</h3>
        </section>
        <section>
          <h3>Cloudformation</h3>
          <ul>
            <li>Beschleunigte Cloud-Bereitstellung mit Infrastructure as Code</li>
            <li>YML / XML Syntax</li>
            <li>CLI Access</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h3>s3-cloudformation.yml</h3>
          <pre><code class="yaml" data-trim data-noescape data-line-numbers><script type="text/template">
            AWSTemplateFormatVersion: "2010-09-09"
            Description: S3 Bucket for crap-stories
            Resources:
              S3Bucket:
                Type: AWS::S3::Bucket
                Properties:
                  AccessControl: PublicRead
                  BucketName: "hft-crap-stories"
                  CorsConfiguration:
                    CorsRules:
                      - AllowedHeaders:
                          - "*"
                        AllowedMethods:
                          - GET
                          - HEAD
                          - PUT
                          - POST
                        AllowedOrigins:
                          - "*"
                DeletionPolicy: Retain

              S3BucketPolicy:
                Type: "AWS::S3::BucketPolicy"
                Properties:
                  Bucket: !Ref S3Bucket
                  PolicyDocument:
                    Statement:
                      - Action:
                          - "s3:GetObject"
                        Effect: Allow
                        Principal: "*"
                        Resource:
                          - !Join
                            - "/"
                            - - !GetAtt S3Bucket.Arn
                              - "*"

            Outputs:
              BucketARN:
                Description: S3 Bucket Amazon Resource Name
                Value: !GetAtt S3Bucket.Arn
                Export:
                  Name: !Sub ${AWS::StackName}-BucketARN

          </script></code></pre>
        </section>
        <section data-auto-animate>
          <h3>s3-cloudformation.yml</h3>
          <pre><code class="bash" data-trim data-noescape data-line-numbers><script type="text/template">
            aws cloudformation deploy --stack-name hft-crap-stores --template-file ./infrastructure/s3-cloudformation.yml
          </script></code></pre>
        </section>
        <section data-auto-animate>
          <h3>aws.js</h3>
          <pre><code class="js" data-trim data-noescape data-line-numbers><script type="text/template">
            import AWS from "aws-sdk";
            import env from "./env";

            AWS.config = new AWS.Config({
              accessKeyId: env.awsAccessKeyId,
              secretAccessKey: env.awsSecretAccessKey,
              region: "eu-central-1",
              signatureVersion: "v4",
            });

            export const s3 = new AWS.S3();
          </script></code></pre>
        </section>
        <section data-auto-animate>
          <h3>env.js</h3>
          <pre><code class="js" data-trim data-noescape data-line-numbers="13,14,34,35"><script type="text/template">
            import Joi from "@hapi/joi";
            import packageJson from "../../package.json";
            
            // define validation for all the env vars
            const envVarsSchema = Joi.object({
              NODE_ENV: Joi.string().default("development"),
              PORT: Joi.number().default(3001),
              LOG_LEVEL: Joi.string().default("debug"),
              SOURCE_VERSION: Joi.string().default(process.env.HEROKU_SLUG_COMMIT ? process.env.HEROKU_SLUG_COMMIT.substring(0, 7) : "?????"),
              DB_HOST: Joi.string(),
              CORS_URLS: Joi.string().default("https://app.neurolabs.ai"),
              JWKS_URI: Joi.string(),
              AWS_ACCESS_KEY_ID: Joi.string(),
              AWS_SECRET_ACCESS_KEY: Joi.string(),
            })
              .unknown()
              .required();
            
            const { error, value: envVars } = envVarsSchema.validate(process.env);
            
            if (error) {
              throw new Error(`Config validation error: ${error.message}`);
            }
            
            const config = {
              env: envVars.NODE_ENV,
              port: envVars.PORT,
              version: packageJson.version,
              commitHash: envVars.SOURCE_VERSION,
              dbHost: envVars.DB_HOST,
              logLevel: envVars.LOG_LEVEL,
              corsUrls: envVars.CORS_URLS.split(" "),
              jwksUri: envVars.JWKS_URI,
              awsAccessKeyId: envVars.AWS_ACCESS_KEY_ID,
              awsSecretAccessKey: envVars.AWS_SECRET_ACCESS_KEY,
            };
            
            export default config;            
          </script></code></pre>
        </section>
        <section data-auto-animate>
          <h3>signedRequest.graphql</h3>
          <pre><code class="graphql" data-trim data-noescape data-line-numbers><script type="text/template">
            type SignedUrlResult {
              success: Boolean!
              errors: [String]
              signedUrl: String
            }
            
            input SignedUrlInput {
              fileType: String!
            }
            
            type Query {
              generateUrl(input: SignedUrlInput!): SignedUrlResult! @isAuthenticated
            }
          </script></code></pre>
        </section>
        <section data-auto-animate>
          <h3>signedRequest.query.spec.js</h3>
          <pre><code class="js" data-trim data-noescape data-line-numbers><script type="text/template">
            import request from "supertest";
            import { s3 } from "../../config/aws";
            
            jest.mock("consola").mock("../../apolloMiddleware/userContext");
            
            const queryData = {
              query: `query Query($input: SignedUrlInput!) {
                generateUrl(input: $input) {
                  success
                  errors
                  signedUrl
                }
              }  
              `,
              variables: {
                input: {
                  fileType: "image/jpeg",
                },
              },
            };
            
            describe("SignedUrl resolver", () => {
              it("generateUrl should return a signedUrl", async () => {
                const spy = jest.spyOn(s3, "getSignedUrl").mockImplementation(() => "signed-url");
            
                const response = await request(global.app).post("/graphql").send(queryData);
                expect(spy).toHaveBeenCalled();
                expect(response.status).toBe(200);
                expect(response.body.data.generateUrl.success).toBeTruthy();
                expect(response.body.data.generateUrl.errors).toHaveLength(0);
                expect(response.body.data.generateUrl.signedUrl).toBe("signed-url");
            
                spy.mockRestore();
              });
            
              it("should throw an error", async () => {
                const spy = jest.spyOn(s3, "getSignedUrl").mockImplementation(() => {
                  throw new Error("nay");
                });
            
                const response = await request(global.app).post("/graphql").send(queryData);
                expect(response.body.data.generateUrl.errors).toHaveLength(1);
                expect(response.body.data.generateUrl.errors[0]).toBe("nay");
                expect(response.status).toBe(200);
                spy.mockRestore();
              });
            });                       
          </script></code></pre>
        </section>
        <section data-auto-animate>
          <h3>signedRequest.resolver.js</h3>
          <pre><code class="js" data-trim data-noescape data-line-numbers><script type="text/template">
            import { s3 } from "../config/aws";
            import { v4 as uuid } from "uuid";

            const StoryResolver = {
              Query: {
                generateUrl: async (parent, { input }, context, info) => {
                  try {
                    const signedUrl = s3.getSignedUrl("putObject", {
                      Key: `${uuid()}.${input.fileType.split("/")[1]}`,
                      Bucket: "hft-crap-stories",
                      Expires: 3600,
                    });

                    return {
                      success: true,
                      errors: [],
                      signedUrl: signedUrl,
                    };
                  } catch (err) {
                    return {
                      success: false,
                      errors: [err.message ? err.message : err],
                      signedUrl: null,
                    };
                  }
                },
              },
            };

            export default StoryResolver;
          </script></code></pre>
        </section>
      </section>

      <section>
        <section data-auto-animate data-background-size="cover"
          data-background-image="https://media.giphy.com/media/xTk9ZvMnbIiIew7IpW/giphy.gif">
          <h3 class="title">Frontend upload</h3>
        </section>
        <section data-auto-animate>
          <h3>mockRequests.js</h3>
          <pre><code class="js" data-trim data-noescape data-line-numbers><script type="text/template">
          const signedUrlHandlers = [
            graphql.query("SignedUrlQuery", (req, res, ctx) =>
              res(
                ctx.data({
                  generateUrl: { signedUrl: "signed-url", success: true, errors: null },
                })
              )
            ),
            rest.put(`signed-url`, (req, res, ctx) => {
              return res(ctx.json({ msg: "ok" }));
            }),
          ];
          </script></code></pre>
        </section>
        <section data-auto-animate>
          <h3>React custom hook module pattern</h3>
          <ul>
            <li>Wenn der Code in einer Komponente zu groß wird</li>
            <li>Wenn der Code komplex wird</li>
            <li>Wenn wenn beide Teile unabhängig von einander getestet werden sollen</li>
          </ul>
        </section>
        <section data-auto-animate>
          <h3>HomeCreateView.js</h3>
          <pre><code class="jsx" data-trim data-noescape data-line-numbers="5,9,13,28"><script type="text/template">
            import { Form, message } from "antd";
            import HomeFormFields from "./components/HomeFormFields";
            import { useNavigate } from "react-router-dom";
            import { RouteName } from "../../routes/routesnames";
            import useStoryCreate from "./components/useStoryCreate";
            
            export default function HomeCreateView() {
              const navigate = useNavigate();
              const { operations, state } = useStoryCreate();
            
              const handleFinish = async (values) => {
                try {
                  await operations.handleCreate(values);
                  message.success("Story created!");
                  navigate(RouteName.HOME);
                } catch (err) {
                  console.log("err", err);
                  message.error("Could not store story");
                }
              };
            
              return (
                <Form
                  labelCol={{ span: 8 }}
                  wrapperCol={{ span: 10 }}
                  onFinish={handleFinish}
                >
                  <HomeFormFields isLoading={state.isUploading} />
                </Form>
              );
            }
          </script></code></pre>
        </section>
        <section data-auto-animate>
          <h3>HomeCreateView.spec.js</h3>
          <pre><code class="jsx" data-trim data-noescape data-line-numbers="5,7,11-14"><script type="text/template">
            import { render, screen } from "@testing-library/react";
            import userEvent from "@testing-library/user-event";
            import { AllProviders } from "../../../testUtils";
            import HomeCreateView from "../HomeCreateView";
            import useStoryCreate from "../components/useStoryCreate";

            jest.mock("async-validator").mock("../components/useStoryCreate");

            describe("HomeCreateView", () => {
              it("should show a success message", async () => {
                useStoryCreate.mockReturnValue({
                  operations: { handleCreate: () => Promise.resolve() },
                  state: { isUploading: false },
                });

                render(
                  <AllProviders>
                    <HomeCreateView />
                  </AllProviders>
                );

                const fileInput = await screen.findByTestId("drop");
                const file = new File(["(⌐□_□)"], "chucknorris.png", { type: ".png" });
                await userEvent.upload(fileInput, file);
                const titleField = await screen.findByLabelText("Title");
                const submitButton = await screen.findByRole("button", {
                  name: /Add this story/i,
                });

                userEvent.type(titleField, "sth");
                userEvent.click(submitButton);

                const text = await screen.findByText(/Story created!/i);
                expect(text).toBeInTheDocument();
              });
            });
          </script></code></pre>
        </section>
        <section data-auto-animate>
          <h3>useStoryCreate.spec.js</h3>
          <pre><code class="jsx" data-trim data-noescape data-line-numbers><script type="text/template">
            describe("useStoryCreate", () => {
              it("should do it", async () => {
                const wrapper = ({ children }) => <AllProviders>{children}</AllProviders>;
                const { result } = renderHook(() => useStoryCreate(), { wrapper });
                const values = {
                  title: "teststory",
                  thumbnail: new File(["(⌐□_□)"], "chucknorris.png", { type: ".png" }),
                };
            
                await act(async () => {
                  await expect(
                    result.current.operations.handleCreate(values)
                  ).resolves.toBeUndefined();
                });
              });            
            });
          </script></code></pre>
        </section>
        <section data-auto-animate>
          <h3>useStoryCreate.js</h3>
          <pre><code class="jsx" data-trim data-noescape data-line-numbers><script type="text/template">
            import { useState } from "react";
            import { useLazyQuery, useMutation } from "@apollo/client";
            import createStoryMutation from "../gql/createStory.mutation";
            import signedUrlQuery from "../gql/signedUrl.query";

            export default function useStoryCreate() {
              const [isUploading, setIsUploading] = useState();
              const [createStory] = useMutation(createStoryMutation);
              const [signedUrl] = useLazyQuery(signedUrlQuery);

              const handleCreate = async (values) => {
                setIsUploading(true);
                const { data } = await signedUrl({
                  variables: { input: { fileType: values.thumbnail.type } },
                });

                if (!data.generateUrl.success) {
                  throw new Error(data.errors);
                }

                await fetch(data.generateUrl.signedUrl, {
                  method: "put",
                  "Content-Type": values.thumbnail.type,
                  body: values.thumbnail,
                });

                await createStory({
                  variables: {
                    input: {
                      title: values.title,
                      imageUrl: data.generateUrl.signedUrl.split("?")[0],
                    },
                  },
                });
                setIsUploading(false);
              };

              return {
                operations: { handleCreate },
                state: { isUploading },
              };
            }
          </script></code></pre>
        </section>
      </section>

      <section>
        <h3>Links</h3>
        <ul>
          <li>
            <a href="https://github.com/maciossek/crap-stories-react/tree/feature/signed-url">Frontend Repo</a>
          </li>
          <li>
            <a href="https://github.com/maciossek/crap-stories-node/tree/feature/signed-url">Backend Repo</a>
          </li>
        </ul>
      </section>
    </div>
  </div>
</body>

</html>
